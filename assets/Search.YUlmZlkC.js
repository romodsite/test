import{r as e,j as t}from"./index.BAl22FBm.js";import{U as r,k as s,e as n,c as a,F as i,j as l,y as o}from"./App.R-CNmUno.js";import{C as d}from"./Card.hYBvXyrG.js";import"./vendor.BHl_RpiB.js";const m=["","Exclusive","Community","Meme","Amateur","Asian","BDSM","Big Ass","Big Tits","Blonde","Brunette","Creampie","Ebony","Hardcore","Interracial","Latina","MILF","POV","Public","Redhead","Teen","Threesome"],u=({searchQuery:u})=>{const{user:c}=e.useContext(r),[x,p]=s(),h=n(),g=a(),[f,y]=e.useState([]),[w,j]=e.useState(!1),[b,v]=e.useState(null),[N,S]=e.useState(!1),[A,C]=e.useState((()=>h.query||x.get("q")||u||"")),[L,q]=e.useState((()=>h.genre||x.get("g")||"")),[I,E]=e.useState((()=>h.username||x.get("u")||"")),[B,R]=e.useState(null),[T,U]=e.useState(640>window.innerWidth);return e.useEffect((()=>{const e=()=>{U(640>window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e.useEffect((()=>{const e=h.query||x.get("q")||u||"",t=h.genre||x.get("g")||"",r=h.username||x.get("u")||"";C(e),q(t),E(r),(async(e=null)=>{const t=(null==e?void 0:e.query)??A,r=(null==e?void 0:e.genre)??L,s=(null==e?void 0:e.username)??I;j(!0),v(null);try{S(!(t||r||s));const e=await l(20,t,s,r,null);R({timestamp:(new Date).toLocaleTimeString(),count:Array.isArray(e)?e.length:"non-array",firstItem:Array.isArray(e)&&e.length>0?e[0].title:"none"}),y(Array.isArray(e)?e:[])}catch(n){v(n.message||"An error occurred"),o.error("Search error: "+(n.message||"An unknown error occurred")),y([])}finally{j(!1)}})({query:e,genre:t,username:r})}),[h,x,u]),t.jsxs("div",{className:"p-8 pt-[100px]",children:[t.jsx("h1",{className:"text-3xl font-bold mb-4 text-white",children:A?`Results for "${A}"`:I?"Posts by "+I:L?"Genre: "+L:N?"Latest published posts":"Search"}),t.jsx("form",{onSubmit(e){e.preventDefault();const t=((e,t,r)=>{const s=[];return t&&s.push("genre/"+encodeURIComponent(t)),r&&s.push("user/"+encodeURIComponent(r)),e&&s.push("query/"+encodeURIComponent(e)),s.length>0?"/search/"+s.join("/"):"/search"})(A,L,I);g(t)},className:"mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsxs("div",{className:"relative flex-grow",children:[t.jsx("input",{type:"text",placeholder:"Search...",value:A,onChange:e=>C(e.target.value),className:"w-full px-4 py-3 rounded bg-gray-800 text-white focus:ring-2 focus:ring-blue-500"}),t.jsx(i,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:w-auto w-full",children:[t.jsxs("select",{value:L,onChange:e=>q(e.target.value),className:"px-4 py-3 rounded bg-gray-800 text-white md:w-40 w-full appearance-none cursor-pointer",children:[t.jsx("option",{value:"",children:"All genres"}),m.filter((e=>""!==e)).map((e=>t.jsx("option",{value:e,children:e},e)))]}),t.jsx("input",{type:"text",placeholder:"Username",value:I,onChange:e=>E(e.target.value),className:"px-4 py-3 rounded bg-gray-800 text-white md:w-40 w-full"}),t.jsx("button",{type:"submit",className:"px-6 py-3 rounded bg-blue-600 text-white hover:bg-blue-700 transition w-full md:w-auto",children:"Search"})]})]})}),b&&t.jsx("div",{className:"my-4 p-4 bg-red-500 bg-opacity-20 border-l-4 border-red-500 text-white rounded",children:b}),w&&t.jsxs("div",{className:"flex items-center justify-center my-20",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-red-500"}),t.jsx("span",{className:"ml-3 text-white text-lg",children:"Loading..."})]}),!w&&t.jsx(t.Fragment,{children:0===f.length?t.jsxs("div",{className:"text-center text-white my-20",children:[t.jsx("p",{className:"text-xl font-medium",children:"No results found"}),t.jsx("p",{className:"text-gray-400 mt-2",children:"Try with different search terms"})]}):t.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-4 justify-center lg:justify-start",children:f.map((e=>t.jsx(d,{id:e.id,image:e.image,link:e.link,title:e.title,genres:e.genres||[],username:e.username,user:c},e.id)))})}),B&&t.jsxs("div",{className:"mt-8 text-xs text-gray-400",children:[t.jsxs("p",{children:["Last search: ",B.timestamp]}),t.jsxs("p",{children:["Number of results: ",B.count]}),t.jsxs("p",{children:["First result: ",B.firstItem]})]}),t.jsx("style",{children:"\n                /* On mobile, reduce card size */\n                @media (max-width: 640px) {\n                    .card {\n                        width: 150px !important;\n                        height: 230px !important;\n                        min-width: 150px !important;\n                        min-height: 230px !important;\n                    }\n                }\n                \n                /* On tablet, intermediate size */\n                @media (min-width: 641px) and (max-width: 768px) {\n                    .card {\n                        width: 190px !important;\n                        height: 260px !important;\n                        min-width: 190px !important;\n                        min-height: 260px !important;\n                    }\n                }\n                \n                /* Default style uses standard dimensions of Card component */\n            "})]})};export{u as default};
