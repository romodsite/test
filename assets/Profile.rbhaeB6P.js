import{j as e}from"./index.xDGvdcGR.js";import{d as s,u as t,r as a,R as l}from"./router.BuKbULCr.js";import{U as r,g as n,w as c,b as o,F as i}from"./App.CWrh0A6d.js";import"./player.BR9K4l7b.js";import"./vendor.BBo61Skz.js";const d=l.memo((({searchedUser:s,isModeratorOrAdmin:t,handleWarn:a,handleBan:l,warnReason:r,setWarnReason:n,banReason:c,setBanReason:o})=>e.jsxs("div",{className:"lg:fixed flex flex-col justify-between text-white mb-6 lg:w-1/4",children:[e.jsx("div",{className:"flex flex-col items-center lg:items-start gap-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:(null==s?void 0:s.profilePicture)||"https://i.pinimg.com/736x/e8/3c/db/e83cdbd70190f7f28de6d68c9e129dd7.jpg",alt:"Profile",className:"h-24 w-24 lg:h-30 lg:w-30 rounded-full"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white",children:null==s?void 0:s.username})}),e.jsx("p",{className:"text-sm lg:text-lg font-medium text-gray-400",children:null==s?void 0:s.role})]})]})}),e.jsxs("p",{className:"font-bold mt-4 text-center lg:text-left",children:["Registration date ",e.jsx("br",{})," ",e.jsx("span",{className:"font-medium",children:(null==s?void 0:s.dateCreation)||"N/A"})]}),e.jsxs("p",{className:"font-bold mt-4 text-center lg:text-left",children:["Account status ",e.jsx("br",{})," ",(null==s?void 0:s.banned)?e.jsx("span",{className:"text-red-600 font-medium",children:"Suspended"}):e.jsx("span",{className:"text-green-600 font-medium",children:"Active"})]}),e.jsxs("p",{className:"font-bold mt-4 text-center lg:text-left",children:["Number of warnings ",e.jsx("br",{})," ",e.jsx("span",{className:"font-medium",children:(null==s?void 0:s.warnings)||0})]}),t&&e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-2",children:[e.jsx("button",{onClick:()=>a(),className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"Warn"}),e.jsx("input",{type:"text",placeholder:"Reason for warning",value:r,onChange:e=>n(e.target.value),className:"p-2 rounded w-full lg:w-auto"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-2",children:[e.jsx("button",{onClick:()=>l(),className:"bg-red-500 text-white px-4 py-2 rounded",children:"Ban"}),e.jsx("input",{type:"text",placeholder:"Reason for ban",value:c,onChange:e=>o(e.target.value),className:"p-2 rounded w-full lg:w-auto"})]})]})]}))),x=l.memo((({searchedUser:s,posts:t})=>e.jsxs("div",{className:"lg:pl-[384px] w-full",children:[e.jsxs("h2",{className:"text-2xl lg:text-3xl font-bold mb-4 text-white text-center lg:text-left",children:["Posts by ",null==s?void 0:s.username]}),e.jsx("div",{className:"flex flex-wrap gap-4 justify-center lg:justify-start",children:t.map((s=>e.jsxs("div",{className:"card w-64 h-40 bg-cover bg-center",style:{backgroundImage:`url(${s.image})`},children:[e.jsx("h2",{children:s.title}),e.jsx("p",{children:s.genres.join(", ")})]},s.id)))})]}))),m=l.memo((({searchQuery:s,setSearchQuery:t,handleSearch:a})=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen text-white",children:[e.jsx("h1",{className:"text-6xl font-bold animate-bounce",children:"404"}),e.jsx("p",{className:"text-2xl mt-4",children:"User not found"}),e.jsx("p",{className:"text-lg mt-2 text-gray-400 text-center",children:"The user you are looking for does not exist or has been deleted."}),e.jsx("label",{className:"mt-6 text-lg text-gray-300",children:"Search for another user?"}),e.jsxs("div",{className:"mt-2 flex items-center",children:[e.jsx("input",{type:"text",placeholder:"Username",value:s,onChange:e=>t(e.target.value),onKeyDown:e=>"Enter"===e.key&&a(),className:"p-2 rounded rounded-r-none bg-gray-800 text-white w-64 focus:outline-none"}),e.jsx("button",{onClick:a,className:"p-2 cursor-pointer bg-red-400 rounded rounded-l-none text-black flex items-center justify-center",children:e.jsx(i,{className:"h-6 w-6"})})]})]}))),u=()=>{const{user:l}=s(),i=t(),[u,h]=a.useState(null),[f,g]=a.useState([]),[p,j]=a.useState(!0),[b,w]=a.useState(!1),[N,y]=a.useState(""),[v,S]=a.useState(""),[C,R]=a.useState(!1),[k,U]=a.useState(""),{user:A}=a.useContext(r),B=a.useCallback((async e=>{try{j(!0);const s=await n(e);h(s.user),g(s.posts),w(!1)}catch(s){w(!0)}finally{j(!1)}}),[]),P=a.useCallback((()=>{k.trim()&&(j(!0),w(!1),h(null),g([]),i("/profile/"+k.trim()))}),[k,i]),W=a.useCallback((async()=>{if(!N)return alert("Please provide a reason for the warning.");try{await c(l,N),alert("User warned successfully."),y(""),h((e=>({...e,warnings:e.warnings+1})))}catch(e){}}),[l,N]),M=a.useCallback((async()=>{if(!v)return alert("Please provide a reason for the ban.");try{await o(l,v),alert("User banned successfully."),S(""),h((e=>({...e,banned:!0})))}catch(e){}}),[l,v]);a.useEffect((()=>{(async()=>{try{await B(l),!A||"Administrator"!==A.role&&"Moderator"!==A.role||R(!0)}catch(e){w(!0),j(!1)}})()}),[l,A,B]);const Q=a.useMemo((()=>e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-red-500 border-solid"})})),[]);return p?Q:b?e.jsx(m,{searchQuery:k,setSearchQuery:U,handleSearch:P}):e.jsxs("div",{className:"container mx-auto p-4 pt-[100px] flex flex-col lg:flex-row",children:[e.jsx(d,{searchedUser:u,isModeratorOrAdmin:C,handleWarn:W,handleBan:M,warnReason:N,setWarnReason:y,banReason:v,setBanReason:S}),e.jsx(x,{searchedUser:u,posts:f})]})};export{u as default};
