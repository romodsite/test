import{j as e}from"./index.xDGvdcGR.js";import{r as t,u as s,L as r}from"./router.BuKbULCr.js";import{r as a,y as n}from"./App.CWrh0A6d.js";/* empty css               */import"./player.BR9K4l7b.js";import"./vendor.BBo61Skz.js";const l=()=>{const[l,o]=t.useState(""),[i,c]=t.useState(""),[d,u]=t.useState(""),[m,p]=t.useState({}),[x,h]=t.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,specialChar:!1}),[g,b]=t.useState(null),[f,j]=t.useState(!1),[w,v]=t.useState(!1),[y,N]=t.useState(""),k=s(),C=(e,t)=>{const s={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),number:/[0-9]/.test(e),specialChar:/[!@#$%^&*.]/.test(e)};return h(s),e===t?"Le mot de passe ne peut pas être identique au nom d'utilisateur":s.length?s.lowercase?s.uppercase?s.number?s.specialChar?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre majuscule":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit comporter au moins 8 caractères"};return e.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:e.jsx("div",{className:"w-full bg-[#1f2937] rounded-lg shadow md:mt-0 sm:max-w-md xl:p-0",children:e.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:f?e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold leading-tight tracking-tight md:text-2xl text-white",children:["Bienvenue, ",l,"!"]}),e.jsx("p",{className:"text-white mt-4",children:"Veuillez sauvegarder votre token de réinitialisation :"}),e.jsx("input",{type:"text",value:g.resetToken,readOnly:!0,className:"bg-gray-800 border border-gray-600 text-white rounded-lg block w-full p-2.5 mt-2 break-all"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ce token sert à réinitialiser votre mot de passe"}),e.jsx("button",{onClick(){navigator.clipboard.writeText(g.resetToken),alert("Le token de réinitialisation a été copié dans le presse-papiers")},className:"mt-4 text-white bg-blue-500 hover:bg-blue-700 font-medium rounded-lg text-sm px-4 py-2.5 text-center cursor-pointer",children:"Copier dans le presse-papiers"}),e.jsx("button",{onClick(){const e=document.createElement("a"),t=new Blob([g.resetToken],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="resetToken.txt",document.body.appendChild(e),e.click()},className:"mt-4 ml-2 text-white bg-green-500 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center cursor-pointer",children:"Télécharger en .txt"}),e.jsx("button",{onClick(){k("/login?username="+l)},className:"block text-center bg-white hover:bg-gray-300 rounded-lg text-[#ed3f5e] mt-4 py-2.5 w-full",children:"Se connecter"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight md:text-2xl text-white",children:"Créez votre compte"}),e.jsxs("form",{className:"space-y-4 md:space-y-6",async onSubmit(e){var t,s;e.preventDefault();const r=3>(o=l).length?"Le nom d'utilisateur doit comporter au moins 3 caractères":o.length>24?"Le nom d'utilisateur ne peut pas dépasser 24 caractères":/^[a-zA-Z0-9]+$/.test(o)?null:"Le nom d'utilisateur ne peut contenir que des lettres et des chiffres";var o;const c=C(i,l),u=i!==d?"Les mots de passe ne correspondent pas":null;if(r||c||u)return p({username:r,password:c,confirmPassword:u}),void N("Veuillez corriger les erreurs ci-dessous.");v(!0);const m=new Promise((e=>setTimeout(e,2e3)));try{const e=await a(l,i);await m,b(e),j(!0),n.success("Inscription réussie ! Veuillez sauvegarder votre token.")}catch(x){N(x.response.data.error),n.error((null==(s=null==(t=x.response)?void 0:t.data)?void 0:s.error)||"Erreur lors de l'inscription")}finally{v(!1)}},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block mb-2 text-sm font-medium text-white",children:"Votre nom d'utilisateur"}),e.jsx("input",{type:"text",name:"username",id:"username",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:l,onChange:e=>o(e.target.value),maxLength:"24"}),m.username&&e.jsx("p",{className:"text-red-500 text-sm",children:m.username}),y&&e.jsx("div",{className:"text-sm font-medium text-red-500",children:y})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-white",children:"Mot de passe"}),e.jsx("input",{type:"password",name:"password",id:"password",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:i,onChange(e){c(e.target.value),C(e.target.value,l)}}),m.password&&e.jsx("p",{className:"text-red-500 text-sm",children:m.password}),e.jsxs("ul",{className:"text-sm text-gray-400 mt-2",children:[e.jsx("li",{className:x.length?"text-green-500":"",children:"Au moins 8 caractères"}),e.jsx("li",{className:x.lowercase?"text-green-500":"",children:"Au moins une lettre minuscule"}),e.jsx("li",{className:x.uppercase?"text-green-500":"",children:"Au moins une lettre majuscule"}),e.jsx("li",{className:x.number?"text-green-500":"",children:"Au moins un chiffre"}),e.jsx("li",{className:x.specialChar?"text-green-500":"",children:"Au moins un caractère spécial"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block mb-2 text-sm font-medium text-white",children:"Confirmez le mot de passe"}),e.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:d,onChange:e=>u(e.target.value)}),m.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:m.confirmPassword})]}),e.jsx("button",{type:"submit",className:"w-full text-white bg-[#e11d48] font-medium rounded-lg text-sm px-5 py-2.5 text-center hover:bg-[#be123c] cursor-pointer",children:w?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-6 w-6"})}):"S'inscrire"}),e.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Vous avez déjà un compte ? ",e.jsx(r,{to:"/login",className:"font-medium hover:underline text-[#ed3f5e]",children:"Se connecter"})]})]})]})})})})};export{l as default};
