import{r as e,j as t}from"./index.D5OR55Lx.js";import{c as s,L as r,r as a,y as n}from"./App.Dz69de1U.js";/* empty css               */import"./vendor.BHl_RpiB.js";const l=()=>{const[l,o]=e.useState(""),[i,c]=e.useState(""),[d,u]=e.useState(""),[m,x]=e.useState({}),[p,h]=e.useState({length:!1,lowercase:!1,uppercase:!1,number:!1,specialChar:!1}),[g,b]=e.useState(null),[f,j]=e.useState(!1),[w,v]=e.useState(!1),[y,N]=e.useState(""),k=s(),C=(e,t)=>{const s={length:e.length>=8,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),number:/[0-9]/.test(e),specialChar:/[!@#$%^&*.]/.test(e)};return h(s),e===t?"Le mot de passe ne peut pas être identique au nom d'utilisateur":s.length?s.lowercase?s.uppercase?s.number?s.specialChar?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre majuscule":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit comporter au moins 8 caractères"};return t.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:t.jsx("div",{className:"w-full bg-[#1f2937] rounded-lg shadow md:mt-0 sm:max-w-md xl:p-0",children:t.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:f?t.jsxs("div",{children:[t.jsxs("h1",{className:"text-xl font-bold leading-tight tracking-tight md:text-2xl text-white",children:["Bienvenue, ",l,"!"]}),t.jsx("p",{className:"text-white mt-4",children:"Veuillez sauvegarder votre token de réinitialisation :"}),t.jsx("input",{type:"text",value:g.resetToken,readOnly:!0,className:"bg-gray-800 border border-gray-600 text-white rounded-lg block w-full p-2.5 mt-2 break-all"}),t.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Ce token sert à réinitialiser votre mot de passe"}),t.jsx("button",{onClick(){navigator.clipboard.writeText(g.resetToken),alert("Le token de réinitialisation a été copié dans le presse-papiers")},className:"mt-4 text-white bg-blue-500 hover:bg-blue-700 font-medium rounded-lg text-sm px-4 py-2.5 text-center cursor-pointer",children:"Copier dans le presse-papiers"}),t.jsx("button",{onClick(){const e=document.createElement("a"),t=new Blob([g.resetToken],{type:"text/plain"});e.href=URL.createObjectURL(t),e.download="resetToken.txt",document.body.appendChild(e),e.click()},className:"mt-4 ml-2 text-white bg-green-500 hover:bg-green-700 font-medium rounded-lg text-sm px-5 py-2.5 text-center cursor-pointer",children:"Télécharger en .txt"}),t.jsx("button",{onClick(){k("/login?username="+l)},className:"block text-center bg-white hover:bg-gray-300 rounded-lg text-[#ed3f5e] mt-4 py-2.5 w-full",children:"Se connecter"})]}):t.jsxs(t.Fragment,{children:[t.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight md:text-2xl text-white",children:"Créez votre compte"}),t.jsxs("form",{className:"space-y-4 md:space-y-6",async onSubmit(e){var t,s;e.preventDefault();const r=3>(o=l).length?"Le nom d'utilisateur doit comporter au moins 3 caractères":o.length>24?"Le nom d'utilisateur ne peut pas dépasser 24 caractères":/^[a-zA-Z0-9]+$/.test(o)?null:"Le nom d'utilisateur ne peut contenir que des lettres et des chiffres";var o;const c=C(i,l),u=i!==d?"Les mots de passe ne correspondent pas":null;if(r||c||u)return x({username:r,password:c,confirmPassword:u}),void N("Veuillez corriger les erreurs ci-dessous.");v(!0);const m=new Promise((e=>setTimeout(e,2e3)));try{const e=await a(l,i);await m,b(e),j(!0),n.success("Inscription réussie ! Veuillez sauvegarder votre token.")}catch(p){N(p.response.data.error),n.error((null==(s=null==(t=p.response)?void 0:t.data)?void 0:s.error)||"Erreur lors de l'inscription")}finally{v(!1)}},children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"username",className:"block mb-2 text-sm font-medium text-white",children:"Votre nom d'utilisateur"}),t.jsx("input",{type:"text",name:"username",id:"username",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:l,onChange:e=>o(e.target.value),maxLength:"24"}),m.username&&t.jsx("p",{className:"text-red-500 text-sm",children:m.username}),y&&t.jsx("div",{className:"text-sm font-medium text-red-500",children:y})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-white",children:"Mot de passe"}),t.jsx("input",{type:"password",name:"password",id:"password",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:i,onChange(e){c(e.target.value),C(e.target.value,l)}}),m.password&&t.jsx("p",{className:"text-red-500 text-sm",children:m.password}),t.jsxs("ul",{className:"text-sm text-gray-400 mt-2",children:[t.jsx("li",{className:p.length?"text-green-500":"",children:"Au moins 8 caractères"}),t.jsx("li",{className:p.lowercase?"text-green-500":"",children:"Au moins une lettre minuscule"}),t.jsx("li",{className:p.uppercase?"text-green-500":"",children:"Au moins une lettre majuscule"}),t.jsx("li",{className:p.number?"text-green-500":"",children:"Au moins un chiffre"}),t.jsx("li",{className:p.specialChar?"text-green-500":"",children:"Au moins un caractère spécial"})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block mb-2 text-sm font-medium text-white",children:"Confirmez le mot de passe"}),t.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",className:"bg-gray-800 border border-gray-600 text-white rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",required:!0,value:d,onChange:e=>u(e.target.value)}),m.confirmPassword&&t.jsx("p",{className:"text-red-500 text-sm",children:m.confirmPassword})]}),t.jsx("button",{type:"submit",className:"w-full text-white bg-[#e11d48] font-medium rounded-lg text-sm px-5 py-2.5 text-center hover:bg-[#be123c] cursor-pointer",children:w?t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("div",{className:"loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-6 w-6"})}):"S'inscrire"}),t.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Vous avez déjà un compte ? ",t.jsx(r,{to:"/login",className:"font-medium hover:underline text-[#ed3f5e]",children:"Se connecter"})]})]})]})})})})};export{l as default};
